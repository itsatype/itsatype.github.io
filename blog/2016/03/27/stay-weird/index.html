
<!DOCTYPE HTML>
<html>
<head>
	<script data-cfasync="false" type="text/javascript" src="//use.typekit.net/axj3cfp.js"></script>
	<script data-cfasync="false" type="text/javascript">try{Typekit.load();}catch(e){}</script>
	<meta charset="utf-8">
	<title>Stay weird, JS  | Leah's Loop</title>

<meta name="author" content="Leah"> 

<meta name="description" content="Why the Wat Javascript is weird. There are some odd behaviors it exhibits, with strange outcomes. You can learn more about some of it’s oddities by &hellip;"> <meta name="keywords" content="">

	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Leah's Loop" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/font-awesome.min.css" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script type="text/javascript" src="/javascripts/jquery.fancybox.pack.js"></script>

<script language="Javascript" type="text/javascript">
$(document).ready(
  function() {
    (function($) {
      $(".fancybox[data-content-id]").each(function() {
        this.href = $(this).data('content-id');
      });
      $(".fancybox").fancybox({
        beforeLoad: function() {
          var el, 
              id = $(this.element).data('title-id');

          if (id) {
            el = $('#' + id);

            if (el.length) {
              this.title = el.html();
            }
          }
          if ($(this).data('content')) {
            this.content = $(this).data('content');
          }
        },
        helpers: {
          title: {
            type: 'inside'
          }
        }
      });
    })(jQuery);
  }
);
</script>

	
</head>



<body>
	<header id="header" class="inner"><h1><a href="/">Leah's Loop</a></h1>
<h4></h4>
<nav id="main-nav"><ul>
	<li><a href="/">Blog</a></li>
	<li><a href="/about">About</a></li>
	<li><a href="/portfolio">Portfolio</a></li>
	<li><a href="/archives">Archive</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul>
	<li><a href="/">Blog</a></li>
	<li><a href="/about">About</a></li>
	<li><a href="/portfolio">Portfolio</a></li>
	<li><a href="/archives">Archive</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="https://www.google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:itsatype.github.io">
			</form>
		</div>
	</div>
</nav>


</header>

	<div id="content" class="inner"><article class="post">
	<h2 class="title">Stay Weird, JS</h2>
	<div class="entry-content"><h2>Why the Wat</h2>

<p><img src="/images/what.gif" width="300"></p>

<p>Javascript is weird.  There are some odd behaviors it exhibits, with strange outcomes. You can learn more about some of it’s oddities by watching <a href="https://www.destroyallsoftware.com/talks/wat">this lightning talk</a> by Gary Bernhardt from CodeMash 2012.</p>

<p>But hey, that’s enough trash talk.  In the spirit of giving the benefit of the doubt, let’s explore the reasons for some of its odd behavior. Maybe it&rsquo;s just having a bad day.  Maybe it was never loved as a child.  We don&rsquo;t know.</p>

<p>First and foremost, we should know that the general rule in Javascript is that the plus operator can be used for the following:</p>

<ol>
<li>As an addition operator, operating on two numbers</li>
<li>As a string concatenation operator, operating on two strings</li>
<li>As a prefix operator, indicating a positive number, operating on a single number</li>
</ol>


<p> This means you can only add Numbers and Strings, so any time you are using the + operator and are trying to add other values, such as arrays or objects, Javascript will convert it to either a string or a number, first.</p>

<ul>
<li>Boolean, Null, and Undefined coerce to a number</li>
<li>Objects and functions all coerce to a string</li>
</ul>


<p>Here we go.</p>

<hr />

<p><strong>Array + Array = Empty String</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">[]</span> <span class="o">+</span> <span class="p">[]</span> <span class="o">=</span> <span class="err">‘’</span>
</span></code></pre></td></tr></table></div></figure>


<p>Since our object is an array, and an array object has a valid toString() method on it, Javascript will try to convert it to a string by calling the object.toString().</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">[].</span><span class="nx">toString</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="o">=&gt;</span> <span class="err">‘’</span>
</span></code></pre></td></tr></table></div></figure>


<p>For arrays, this is the same as calling [ ].join(), which will also return an empty string.  Therefore, [] + [] is the concatenation of two empty strings, which will return a single empty string.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="err">‘’</span> <span class="o">+</span> <span class="err">‘’</span>
</span><span class='line'>
</span><span class='line'> <span class="o">=&gt;</span> <span class="err">‘’</span>
</span></code></pre></td></tr></table></div></figure>


<p>Next:</p>

<p><strong>Array + Object = &lsquo;[object Object]’</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">[]</span> <span class="o">+</span> <span class="p">{}</span> <span class="o">=</span> <span class="err">&#39;</span><span class="p">[</span><span class="nx">object</span> <span class="nb">Object</span><span class="p">]</span><span class="err">’</span>
</span></code></pre></td></tr></table></div></figure>


<p>Similar to the above, we already know Javascript will attempt to convert both to primitives.  It will return an empty string for the array.  Then, it will attempt to call the toString method on the right-hand side (RHS), which is our object.  However, {} does not implement a toString() method. However, all objects do inherit this method from Object.prototype, which, when calling toString() on Object, will return ‘object’, and the value of the object, as follows:</p>

<ul>
<li>If the value is undefined: &ldquo;[object Undefined]&rdquo;</li>
<li>If the value is null “[object Null]</li>
</ul>


<p>Since an empty object is neither null, nor undefined, it will return ‘[object Object]’.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nb">String</span><span class="p">(</span> <span class="p">{</span> <span class="nx">foo</span><span class="o">:</span> <span class="err">‘</span><span class="nx">bar</span><span class="err">’</span> <span class="p">}</span> <span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="o">=&gt;</span>  <span class="err">‘</span><span class="p">[</span><span class="nx">object</span> <span class="nb">Object</span><span class="p">]</span><span class="err">’</span>
</span></code></pre></td></tr></table></div></figure>


<p>So when concatenating ‘’ +  ‘[object Object]’, it will still return: &lsquo;[object Object]’</p>

<p><strong>Object + Empty Arary = 0</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{}</span> <span class="o">+</span> <span class="p">[]</span> <span class="o">=</span> <span class="mi">0</span>
</span></code></pre></td></tr></table></div></figure>


<p>This is where things start getting weird.  When coding in JS, we wrap our statements in curly braces, such as if and else, to indicate a code block. Generally speaking, if the { appears at the beginning of a statement it’s going to be interpreted as a code block, so it will simply look at the left-hand side (LHS) operand as an empty block of code.  That would mean the + appears as the beginning of the next statement, and it is interpreted as prefixing a positive number.  And an array, all together now, is coerced into an empty string.  Because of the + prefix, it will then convert that to a number.  What happens when we coerce an empty string to a number?</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nb">Number</span><span class="p">(</span><span class="err">“”</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'> <span class="o">=&gt;</span> <span class="mi">0</span>
</span></code></pre></td></tr></table></div></figure>


<p>We’ve got this.</p>

<p><strong>Object + Object = Not A Number</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="p">{}</span> <span class="o">+</span> <span class="p">{}</span> <span class="o">=</span> <span class="kc">NaN</span>
</span></code></pre></td></tr></table></div></figure>


<p>This should be easy, seeing as we already know Javascript’s quirks.  It will interpret the LHS as an empty code block. It will then try to convert the RHS, by first returning ‘[object Object]’, if you remember that.  Then, since it sees + as a prefix + operator indicating a positive number, it will attempt to convert it to a number.  What happens when we convert strings to numbers?</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nb">Number</span><span class="p">(</span><span class="err">“</span><span class="nx">Foo</span><span class="err">”</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="o">=&gt;</span> <span class="kc">NaN</span>
</span></code></pre></td></tr></table></div></figure>


<hr />

<p>And voila, there we have it.</p>

<p>Okay, so maybe Javascript is still a little weird. But weird is good.  At least that&rsquo;s what my mother used to tell me.</p>

<h4><em>“Be weird. Be random. Be who you are.&ldquo;</em></h4>

<p>&ndash; <em>C.S. Lewis</em></p>

<p><img src="/images/bowties.png" width="500"></p>
</div>


<div class="meta">
	<div class="date">








  


<time datetime="2016-03-27T14:54:13-04:00" pubdate data-updated="true"></time></div>
	

<div class="tags">

	<a class='category' href='/blog/categories/flatiron-school/'>flatiron&nbsp;school</a>

</div>


	
</div></article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	
	<a class="addthis_button_tweet"></a>
	
	
<!---	<a class="addthis_counter addthis_pill_style"></a> --->
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>


</div>
	<footer id="footer" class="inner">Copyright &copy; 2016

    Leah

<br>
Powered by Octopress.
</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->






</body>
</html>
